import{j as n,b as i,c as l}from"./client.js";import{v as d}from"./vscode.js";function o({indent:e,node:t,onEdit:r}){return n.jsxs("div",{style:{whiteSpace:"pre-wrap",fontFamily:"monospace"},children:["    ".repeat(e),u(t,e,r)]})}function u(e,t,r){var s;switch((s=e.node)==null?void 0:s.$case){case"include":return m(e.node.include,r);case"funcDecl":return p(e.node.funcDecl,t,r);case"variable":return x(e.node.variable,r);case"literal":return j(e.node.literal);case"return":return g(e.node.return,r);case"funcCall":return f(e.node.funcCall);case"compStmt":return h(e.node.compStmt,t,r);default:return"WIP"}}function m(e,t){return n.jsxs(n.Fragment,{children:["#include "," ",n.jsx("input",{defaultValue:e.directive,onBlur:r=>{e.directive=r.target.value;const s={node:{$case:"include",include:e}};console.log("blur"),t(s)}})]})}function p(e,t,r){var s;return n.jsxs("div",{children:[n.jsxs("div",{children:[e.returnType," ",e.name," (",e.arguments.map(a=>`${a.dataType} ${a.name}`).join(", "),") ","{"]}),n.jsx(n.Fragment,{children:(s=e.body)==null?void 0:s.elements.map((a,c)=>n.jsx(o,{node:a,indent:t+1,onEdit:r},c))}),n.jsx("div",{children:"}"})]})}function x(e,t){return n.jsxs(n.Fragment,{children:[e.dataType," ",e.name," = ",e.initializer?u(e.initializer,0,t):"",";"]})}function j(e){return n.jsx(n.Fragment,{children:e.value})}function g(e,t){return n.jsxs(n.Fragment,{children:["return ",e.expression?u(e.expression,0,t):"",";"]})}function f(e){return n.jsxs(n.Fragment,{children:[e.name,"(",e.parameters.join(", "),");"]})}function h(e,t,r){return e.elements.map((s,a)=>n.jsx(o,{node:s,indent:t,onEdit:r},a))}function v(){const[e,t]=i.useState({node:void 0});i.useEffect(()=>{const s=a=>{const c=a.data;t(c.contents)};return window.addEventListener("message",s),d.postMessage({type:"ready"}),()=>{window.removeEventListener("message",s)}},[]);const r=s=>{const a={type:"nodeEdit",contents:s};console.log("sending message: ",a),d.postMessage(a)};return n.jsx("div",{children:n.jsx(o,{node:e,indent:0,onEdit:r},0)})}l.createRoot(document.getElementById("root")).render(n.jsx(i.StrictMode,{children:n.jsx(v,{})}));
