import{j as t,b as c,c as d}from"./client.js";import{v as o}from"./vscode.js";function u({indent:e,node:r,onEdit:n}){return t.jsxs("div",{style:{whiteSpace:"pre-wrap",fontFamily:"monospace"},children:["    ".repeat(e),i(r,e,n)]})}function i(e,r,n){switch(e.type){case"IncludeDecl":return p(e,n);case"FuncDecl":return x(e,r,n);case"VarDecl":return j(e,n);case"LiteralExpr":return g(e);case"ReturnStmt":return h(e,n);case"CallExpr":return f(e);case"CompStmt":return l(e,r,n);default:return"WIP"}}function p(e,r){return t.jsxs(t.Fragment,{children:["#include "," ",t.jsx("input",{defaultValue:e.directive,onBlur:n=>{e.directive=n.target.value,console.log("blur"),r(e)}})]})}function x(e,r,n){return t.jsxs("div",{children:[t.jsxs("div",{children:[e.return_type," ",e.name," (",e.params.map(s=>`${s.data_type} ${s.name}`).join(", "),") ","{"]}),t.jsx(t.Fragment,{children:e.body?l(e.body,r+1,n):""}),t.jsx("div",{children:"}"})]})}function j(e,r){return t.jsxs(t.Fragment,{children:[e.data_type," ",e.name," = ",e.initializer?i(e.initializer,0,r):"",";"]})}function g(e){return t.jsx(t.Fragment,{children:e.value})}function h(e,r){return t.jsxs(t.Fragment,{children:["return ",e.expression?i(e.expression,0,r):"",";"]})}function f(e){return t.jsxs(t.Fragment,{children:[e.calle,"(",e.args.join(", "),");"]})}function l(e,r,n){return e.statements.map((s,a)=>t.jsx(u,{node:s,indent:r,onEdit:n},a))}function y(){const[e,r]=c.useState([]);c.useEffect(()=>{const s=a=>{const m=a.data;r(m.contents)};return window.addEventListener("message",s),o.postMessage({type:"ready"}),()=>{window.removeEventListener("message",s)}},[]);const n=s=>{const a={type:"nodeEdit",contents:s};console.log("sending message: ",a),o.postMessage(a)};return t.jsx("div",{children:e.map((s,a)=>t.jsx(u,{node:s,indent:0,onEdit:n},a))})}d.createRoot(document.getElementById("root")).render(t.jsx(c.StrictMode,{children:t.jsx(y,{})}));
