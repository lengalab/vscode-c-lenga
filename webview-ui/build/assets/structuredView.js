import{j as t,b as o,c as l}from"./client.js";import{v as d}from"./vscode.js";function u({indent:e,node:r}){return t.jsxs("div",{style:{whiteSpace:"pre-wrap",fontFamily:"monospace"},children:["    ".repeat(e),i(r,e)]})}function i(e,r){switch(e.type){case"include":return m(e);case"function":return p(e,r);case"variable":return j(e);case"literal":return x(e);case"return":return f(e);case"function_call":return g(e);default:return"WIP"}}function m(e){return t.jsxs(t.Fragment,{children:["#include ",e.value]})}function p(e,r){return t.jsxs("div",{children:[t.jsxs("div",{children:[e.return_type," ",e.name," (",e.args.map(n=>`${n.data_type} ${n.name}`).join(", "),") ","{"]}),t.jsx(t.Fragment,{children:e.body.map((n,s)=>t.jsx(u,{node:n,indent:r+1},s))}),t.jsx("div",{children:"}"})]})}function j(e){return t.jsxs(t.Fragment,{children:[e.data_type," ",e.name," = ",i(e.value,0),";"]})}function x(e){return t.jsx(t.Fragment,{children:e.value})}function f(e){return t.jsxs(t.Fragment,{children:["return ",i(e.value,0),";"]})}function g(e){return t.jsxs(t.Fragment,{children:[e.name,"(",e.parameters.join(", "),");"]})}function h(){const[e,r]=o.useState([]);return o.useEffect(()=>{const n=s=>{const a=s.data;console.log("typeof contents:",typeof a.contents),console.log("contents value:",a.contents);try{const c=typeof a.contents=="string"?JSON.parse(a.contents):a.contents;r(Array.isArray(c)?c:[])}catch(c){console.error("Failed to parse message.contents:",c),r([])}};return window.addEventListener("message",n),d.postMessage({type:"ready"}),()=>{window.removeEventListener("message",n)}},[]),t.jsx("div",{children:e.map((n,s)=>t.jsx(u,{node:n,indent:0},s))})}l.createRoot(document.getElementById("root")).render(t.jsx(o.StrictMode,{children:t.jsx(h,{})}));
